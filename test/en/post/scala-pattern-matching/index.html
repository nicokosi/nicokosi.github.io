<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Let&#39;s play with pattern matching in Scala | Nicokosi&#39;s blog</title>
<link rel="stylesheet" href="https://nicokosi.github.io/test//css/style.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/github.min.css">


<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <img src="/test/images/nicokosi.jpg" width="90" height="90" alt="Nicokosi&#39;s blog" title="Nicokosi&#39;s blog"/>
        <a class="nav-item" href="https://nicokosi.github.io/test/"><h1 class="title is-4">Nicokosi&#39;s blog</h1></a>
      </div>
      <div>
        
            
              
<a href="https://nicokosi.github.io/test/post/scala-pattern-matching/">ðŸ‡«ðŸ‡· version franÃ§aise</a>
              
              
            
        
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
          <a class="level-item" href="https://github.com/nicokosi">
            <span class="icon">
              <i class="fa fa-github"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://twitter.com/nicokosi">
            <span class="icon">
              <i class="fa fa-twitter"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://www.linkedin.com/in/nicolas-kosinski-95184811">
            <span class="icon">
              <i class="fa fa-linkedin"></i>
            </span>
          </a>
          
          <a class="level-item" href="/index.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>
          </a>
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <h2 class="subtitle is-6">September 14, 2016</h2>
    <h1 class="title">Let&#39;s play with pattern matching in Scala</h1>
    <div class="content">
      

<p>Pattern matching is a powerful technique for filtering and testing variables. This article aims at illustrating pattern matching in Scala using a simple example.
Let&rsquo;s say we want to return the color (red or black) of a playing card.</p>

<p>Notes: The code below &ldquo;shows&rdquo; the console output using comments (ex: <code>&quot;foo&quot; // foo</code>). I have used a <a href="https://confluence.jetbrains.com/display/IntelliJIDEA/Working+with+Scala+Worksheet">IntelliJ IDEA worksheet</a> but the standard Scala console can also be used (REPL FTW!)</p>

<p><br/></p>

<h2 id="step-1-let-s-create-a-simple-class">Step #1: let&rsquo;s create a simple class</h2>

<p>Let&rsquo;s create a immutable class for the &ldquo;club&rdquo; suite:</p>

<pre><code class="language-scala">class Club {
  val symbol = &quot;â™£&quot;
  val label = &quot;club&quot;
}

val club: Club = new Club()
club.symbol // â™£
</code></pre>

<p>So far, so good. Instances can be compared by identity (reference) but not by value because we did not override the <code>equals</code> method:</p>

<pre><code class="language-scala">club.equals(club) // true
club == new Club // false
club.eq(new Club) // false
club.equals(new Club) // false
</code></pre>

<p><code>hashCode</code> and <code>toString</code> are also default ones:</p>

<pre><code class="language-scala">club // Club@1ac88f64
club.hashCode() // 1976061787
new Club().hashCode() // 1751431390
</code></pre>

<p><br/></p>

<h2 id="step-2-let-s-create-a-case-class">Step #2: let&rsquo;s create a case class</h2>

<p>A <code>case class</code> has two benefits:</p>

<ol>
<li>auto-implement <code>equals</code>, <code>hashCode</code> and <code>toString</code> methods.</li>
<li>enhance pattern matching capability via two methods: a &ldquo;constructor&rdquo; method, <code>apply</code>, and a &ldquo;de-constructor&rdquo; method, <code>unapply</code>.</li>
</ol>

<pre><code class="language-scala">case class CardSuite(symbol: String, label: String)
</code></pre>

<p><code>apply</code> method is a kind of free constructor. By the way, we don&rsquo;t need to use the <code>new</code> keyword:</p>

<pre><code class="language-scala">CardSuite(&quot;â™£&quot;, &quot;club&quot;) // CardSuite(â™£,club)
</code></pre>

<p><code>equals</code>, <code>hashCode</code> and <code>toString</code> methods are also implemented for free:</p>

<pre><code class="language-scala">CardSuite(&quot;â™£&quot;, &quot;club&quot;).symbol
CardSuite(&quot;â™£&quot;, &quot;club&quot;) == CardSuite(&quot;â™£&quot;, &quot;club&quot;) // true
CardSuite(&quot;â™£&quot;, &quot;club&quot;).equals(CardSuite(&quot;â™£&quot;, &quot;club&quot;)) // true
CardSuite(&quot;â™£&quot;, &quot;club&quot;).eq(CardSuite(&quot;â™£&quot;, &quot;club&quot;)) // false
CardSuite(&quot;â™£&quot;, &quot;club&quot;).hashCode() // 1302714609
CardSuite(&quot;â™£&quot;, &quot;club&quot;).hashCode() // 1302714609
</code></pre>

<p><br/></p>

<h2 id="bonus-step-use-an-enumeration">&ldquo;Bonus&rdquo; step: use an enumeration</h2>

<p>Since there are four suites in French playing cards, we can create an enumeration. This is not directly related to our pattern matching example, but let&rsquo;s do it, for fun and profit. ;-)</p>

<pre><code class="language-scala">object CardSuites {
  val CLUB = CardSuite(&quot;â™£&quot;, &quot;club&quot;)
  val DIAMOND = CardSuite(&quot;â™¦&quot;, &quot;diamond&quot;)
  val HEART = CardSuite(&quot;â™¥&quot;, &quot;heart&quot;)
  val SPADE = CardSuite(&quot;â™ &quot;, &quot;spade&quot;)
  def values() = List(DIAMOND, HEART, SPADE, CLUB)
}
CardSuites.CLUB != CardSuites.DIAMOND // true
CardSuites.values // List(CardSuite(â™¦,diamond), CardSuite(â™¥,heart), CardSuite(â™ ,spade), CardSuite(â™£,club))
</code></pre>

<p><br/></p>

<h2 id="last-step-let-s-use-pattern-matching">Last step: let&rsquo;s use pattern matching!</h2>

<h3 id="first-example">First example</h3>

<p>Here is a first pattern matching example, used in a function that returns the color of a suite card:</p>

<pre><code class="language-scala">def justColor(cardSuite: CardSuite): String = cardSuite match {
  case CardSuites.CLUB | CardSuites.SPADE =&gt; &quot;black&quot;
  case CardSuites.DIAMOND | CardSuites.HEART =&gt; &quot;red&quot;
  case _ =&gt; &quot;none&quot;
}

justColor(CardSuites.SPADE) // black
</code></pre>

<p>This example demonstrates:</p>

<ul>
<li>the <code>|</code> notation (<em>disjunction</em>) that can be used to group several cases;</li>
<li>the <code>_</code> notation (<em>wildcard</em>) for &ldquo;other cases&rdquo;.</li>
</ul>

<h3 id="second-example">Second example</h3>

<p>Here is a second example to demonstrate field filtering, also known as &ldquo;de-structuring&rdquo;:</p>

<pre><code class="language-scala">def describeColor(cardSuite: CardSuite): String = cardSuite match {
  case CardSuite(_, label) =&gt; s&quot;$label is ${justColor(cardSuite)}&quot;
}

describeColor(CardSuites.SPADE) // spade is black
</code></pre>

<p>We only keep the suite label using the <code>unapply</code> method of our case class.</p>

<p>That&rsquo;s all folks! ðŸ¤“</p>

<p>PS: Thanks to JÃ©rÃ´me Prudent for the Scala tips and for the review. JÃ©rÃ´me contributes to the <a href="http://www.arolla.fr/blog">Arolla blog</a> (<a href="http://www.arolla.fr/blog/author/jerome-prudent/">direct link to his posts</a>).</p>

    </div>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; <a href="https://github.com/nicokosi">Nicolas Kosinski</a> 2016</p>
  </div>
</section>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/languages/java.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/languages/scala.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/languages/clojure.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/languages/haskell.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/languages/shell.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


